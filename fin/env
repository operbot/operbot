#!/usr/bin/env python3
# This file is placed in the Public Domain.


"env"


import os
import sys


SKIP = []


def doskip(txt):
    for skip in SKIP:
        if skip in txt:
            return True
    return False


def popen(txt):
    for line in os.popen(txt).readlines():
        if doskip(line):
            continue
        print(line.strip())


if not os.path.exists("dist"):
    popen("fin/build")


if len(sys.argv) == 1:
    name = "operbot"
else:
    name = sys.argv[1]    

popen("python3 -mvirtualenv --system-site-packages env")
popen(f"env/bin/pip3 install {name} -f dist --upgrade --force-reinstall --no-cache-dir --no-deps")
